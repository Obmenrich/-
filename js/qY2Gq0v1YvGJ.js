var _tmr=_tmr||[];!function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function r(e){var t=typeof e;return!("number"===t||"boolean"===t||"string"===t||e.nodeType||e===e.window)}function o(){var e,t,n,i,a,l=arguments,c=l[0]||{},s=!1,u=1,p=l.length;for("boolean"==typeof c&&(s=c,c=l[u++]||{}),r(c)||(c={});u<p;u++)if(null!=(e=l[u]))for(t in e)n=c[t],c!==(i=e[t])&&(s&&i&&(r(i)||(a="[object Array]"===Object.prototype.toString.call(i)))?(a?(a=!1,n=n&&"[object Array]"===Object.prototype.toString.call(n)?n:[]):n=n&&r(n)?n:{},c[t]=o(s,n,i)):void 0!==i&&(c[t]=i));return c}function i(e){var t="";try{var n=new Uint8Array(e);A.crypto.getRandomValues(n);for(var r=0;r<e;r++)t+=(n[r]%16).toString(16)}catch(o){for(t="",r=0;r<e;r++)t+=(n=Math.floor(16*Math.random())).toString(16)}return t}function a(){return(new Date).getTime()}function l(n,r){var o,i={data:r,raw:n,url:"https://top-fwz1.mail.ru"+n};void 0===r?(i.dataSplitter=";",i.open=d,i.connect=f,i.startListen=h,i.stopListen=v,i.open(i),i.connect(i)):("function"==typeof A.XMLHttpRequest?(i.dataSplitter=";",i.open=c,i.connect=s,i.startListen=u,i.stopListen=p,i.open(i),i.connect(i),o=!0):o=!1,o||function(n){var r=D.createElement("iframe"),o=D.createElement("div");o.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),o.appendChild(r),D.body.appendChild(o);try{var i,a=r.contentWindow.document,l=a.createElement("div");for(i in n.data)if(n.data.hasOwnProperty(i)){var c=n.data[i],s=typeof c;if("string"===s||"number"===s){var u=a.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",i),u.value=c,l.appendChild(u)}}var p=a.createElement("form");p.setAttribute("action",n.url),p.setAttribute("method",ee),p.setAttribute("enctype",te),p.appendChild(l);var d=a.createElement("div");d.appendChild(p),a.body.appendChild(d);var f=function(){try{t(r,"load",f),D.body.removeChild(o)}catch(e){F&&console.warn("[TopMailRu] Error#1.2",e)}};e(r,"load",f),p.submit()}catch(e){F&&console.warn("[TopMailRu] Error#1.3",e)}}(i))}function c(e){e._connection=new A.XMLHttpRequest}function s(e){e._connection.open(ee,e.url),e._connection.setRequestHeader("Content-Type",te),e._connection.send(m(e.data,e.dataSplitter))}function u(t){e(t._connection,"load",t._onload),e(t._connection,"error",t._onerror)}function p(e){t(e._connection,"load",e._onload),t(e._connection,"error",e._onerror)}function d(e){e._connection=new Image}function f(e){e._connection.src=e.url+m(e.data,e.dataSplitter)}function h(e){e._connection.onload=e._onload,e._connection.onerror=e._onerror}function v(e){e._connection.onload=null,e._connection.onerror=null}function m(e,t){var n,r=t||";",o="";for(n in e)if(e.hasOwnProperty(n)){var i=e[n],a=typeof i;"string"!==a&&"number"!==a||(o+=r+escape(n)+"="+escape(i))}return o}function g(e){return(e=D.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):null}function y(e,t,n){var r=(n=n||{}).expires;for(var o in"number"==typeof n.expires&&(r=new Date).setTime(r.getTime()+n.expires),r&&r.toUTCString&&(r=r.toUTCString()),n.expires=r,e=e+"="+encodeURIComponent(t),n)((t=n[o])||0===t)&&(e+="; "+o,!0!==t&&(e+="="+t));D.cookie=e}function _(e,t){if(ne&&y(e,t,ie),oe)try{re.setItem(e,t)}catch(e){F&&console.warn("[TopMailRu] Error#1.6",e)}}function b(e){var t;if(!(t=ne?g(e):null)){var n;if(oe)e:{try{n=re.getItem(e);break e}catch(e){F&&console.warn("[TopMailRu] Error#1.5",e)}n=null}else n=null;t=n}return t}function w(e){var t=";e="+escape("detect");l(I(e,"/tracker",!1,!1)+t)}function E(e,t){if(e.length&&null!==t.ecom_data&&!(4096<(n=(n=Q(t.ecom_data))?(""+n).substring(1,n.length-1):"").length||-1===n.search(/\S/))){var n="{"+n+k("_m",t.ecom_method)+k("_t",t.ecom_type)+k("_jst",ye())+"}";l(I({id:e[0]},"/datalayer",!1,!1)+";ids="+escape(e.join())+";e="+escape(n))}}function k(e,t){var n=',"'+e+'":';if(!t||!t.length)return n+"[]";try{return n+'["'+t.join('","')+'"]'}catch(e){}return n+"false"}function T(){}function R(e){e&&"object"==typeof e&&!Ve&&"id"in e&&(Ve=e.id)}function S(e){return(e=Je?Je[e]:void 0)&&Ke?e-Ke:void 0}function M(){if(Je){for(var e=0,t="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),n=0;n<t.length;n++){var r=Je?Je[t[n]]:void 0;0<r&&(r<e||0==e)&&(e=r)}return e||void 0}}function C(e){return e&&"object"==typeof e&&("id"in e&&e.id||Ve)}function I(e,t,n,r){_(xe,++Pe);var o,i="id"in e?e.id:Ve,l="url"in e?e.url:H.href,c="referrer"in e?e.referrer:D.referrer,s="title"in e?e.title:D.title;null===(o=ce)&&(o=function(){var e=g(ue);if(null===e)return null;if(2!==(e=e.split("|")).length)return null;var t=e[1];return 0>(t=a()-t)||t>se?null:(e=parseInt(e[0],10),isNaN(e)?null:e)}()),o=null!==o?o?1:0:null;var u,p="userid"in e?e.userid:Ce||0===Ce?Ce:void 0,d=Ie||void 0;u=[],Ve&&i!==Ve&&u.push("sec"),"dataLayer"in A&&u.push("dl"),de&&u.push(["ecom"].concat(de).join("-")),_e&&_e.length&&u.push(["jst"].concat(_e).join("-")),u=u.join(",");var f,h=A.screen,v=(new Date).getTimezoneOffset();if(f="",A.Intl)try{f=A.Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(e){F&&console.warn("[TopMailRu] Error#1.1",e)}if(f=v+"/"+f,v=null!==(v=Ee)?v:function(){var e=g(we);if(null===e)return null;if(3!==(e=e.split("|")).length)return null;var t=e[2];return 0>(t=a()-t)||t>be?null:{id:e[0],version:e[1]}}(),e.start=M(),t=t+"?js=13"+(i?";id="+escape(i):"")+(l?";u="+escape(l):"")+(c?";r="+escape(c):"")+(e.start?";st="+escape(e.start):"")+("gender"in e?";gender="+escape(e.gender):"")+("age"in e?";age="+escape(e.age):"")+("pid"in e?";pid="+escape(e.pid):"")+(void 0!==p?";userid="+escape(p):"")+(void 0!==d?";uparams="+escape(Q(d)):"")+(r&&s?";title="+encodeURIComponent(s):"")+(h?";s="+h.width+"*"+h.height:"")+";vp=",i=r=0,D.documentElement&&(D.documentElement.clientWidth||D.documentElement.clientHeight)?(r=D.documentElement.clientWidth,i=D.documentElement.clientHeight):"number"==typeof A.innerWidth&&(r=A.innerWidth,i=A.innerHeight),t=t+(r+"*")+i+";touch="+qe+";hds="+Ge+";frame="+We+";flash=",null===ze)if(ze="",V.plugins&&V.plugins["Shockwave Flash"])ze=V.plugins["Shockwave Flash"].description.split(" ")[2];else if(A.ActiveXObject)try{var m=(m=(m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")).split(" ")[1].split(",");ze=m[0]+"."+m[1]}catch(e){F&&console.warn("[TopMailRu] Error#1.12",e)}if(m=t+ze+";sid="+Me+";ver="+Te+";tz="+encodeURIComponent(f),n){if(Je&&Xe){for((n=[]).push(Xe.type),n.push(Xe.redirectCount),n.push(Ke),t=0;t<Be.length;t++)n.push(S(Be[t]));n=n.join("/")}else n="";n=";nt="+n}else n="";if(n=m+n+("device"in e?";device="+escape(e.device):"")+";ni=",V&&V.connection){for(m=V.connection,t=[],i=0;i<Ye.length;i++){if(void 0!==(r=m[Ye[i]]))switch(r){case!0:r=1;break;case!1:r=0;break;default:r=(""+r).replace(/\//g,"_")}t.push(r)}m=t.join("/")}else m="";return n+m+("params"in e?";params="+escape(Q(e.params)):"")+(null!==o?";detect="+o:"")+(ne||oe?";lvid="+escape([Ue,a(),Pe,Oe].join(":")):"")+(u?";opts="+escape(u):"")+(v?";flocid="+escape(v.id)+";flocv="+escape(v.version):"")+("version"in e?";appver="+escape(e.version):"")+(ke.support?";visible="+ke.getValue():"")+";_="+Math.random()}function j(e){e=";e="+escape("PVT/"+e);for(var t=0;t<De.length;t++)l(I(De[t],"/tracker",!1,!0)+e)}function x(){if(ce=!0,O(1),!Z&&!le){le=!0;for(var e=0;e<De.length;e++)w(De[e])}}function P(){O(0),ce=!1}function O(e){e=[e,a()].join("|"),y(ue,e,{path:"/",expires:se})}function U(){D.addEventListener?(t(D,"DOMContentLoaded",U),_tmr.onready()):D.attachEvent&&"complete"===D.readyState&&(t(D,"readystatechange",U),_tmr.onready())}function L(){t(A,"unload",L),t(A,"beforeunload",L),_tmr.unload()}if("[object Array]"===Object.prototype.toString.call(_tmr)){var A=window,V=navigator,D=document,H=location,N="string"==typeof H.hostname?H.hostname:"",$=-1!=N.search(/(^|\.)odnoklassniki\.ru$/)||-1!=N.search(/(^|\.)ok\.ru$/),q=-1!=N.search(/(^|\.)vk\.com$/),G=-1!=N.search(/(^|\.)lamoda\.ru$/),W=-1!=N.search(/(^|\.)kommersant\.ru$/),z="string"==typeof H.search&&-1!=H.search.search(/[?&]rb_clickid=/),F="string"==typeof H.search&&-1!=H.search.search(/[?&]tmr_debug=1(?:&|$)/),J=$||q||G||W,X=!z,B=$||q,K=$||q,Y=$||q,Z=!1,Q=A.JSON&&JSON.stringify?JSON.stringify.bind(JSON):function(e){return""},ee="POST",te="application/x-www-form-urlencoded",ne=!(0===H.hostname.search(/^(\d+.)+\d+$/g)||-1!==H.hostname.search(/:/g)),re=null,oe=function(){var e="tmr"+(""+Math.random()).slice(2);try{return(re=A.localStorage||null).setItem(e,e),re.removeItem(e),!0}catch(e){return re=null,F&&console.warn("[TopMailRu] Error#1.4",e),!1}}(),ie={domain:function(){if(!ne)return null;for(var e,t=H.hostname.split(".").reverse(),n=1,r=t.length;n<r;n++){e=t[0];for(var o=1;o<=n;o++)e=t[o]+"."+e;o=""+a();var i={domain:e,path:"/",expires:3e5};try{y("tmr_tcdhn",o,i);var l=g("tmr_tcdhn");if((i=i||{}).expires=-1,y("tmr_tcdhn","",i),l===o)return e}catch(e){F&&console.warn("[TopMailRu] Error#1.8",e)}}return null}(),path:"/",expires:287712e5};!function(){var e;if(e=D.cookie.match(RegExp("(?:^|; )(tmr_tcdhn\\d+)=([^;]*)","g"))){for(var t,n=[],r=0,o=e.length;r<o;r++)(t=(t=e[r]).match(/(?:^|; )(tmr_tcdhn\d+)=([^;]*)/))&&n.push(t.slice(1));e=n}else e=null;if(e)for(n=0,r=e.length;n<r;n++)o=e[n][0],(t=ie||{}).expires=-1,y(o,"",t)}();var ae,le=!1,ce=null,se=864e5,ue="tmr_detect",pe=function(){function e(e,n){var r=D.createElement("div"),o=function(e,t){for(var n,r,o=e.length,i=0;i<t;i++)r=Math.floor(Math.random()*o),n=e[i],e[i]=e[r],e[r]=n;return e.slice(0,t)}(o=String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,100,118,101,114,116,66,108,111,99,107,32,98,45,114,98,32,98,97,110,110,101,114,95,50,52,48,32,112,45,116,97,114,103,101,116,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,112,117,98,95,55,50,56,120,57,48,32,114,98,95,98,111,100,121,32,114,98,45,102,108,111,97,116,105,110,103,32,114,98,45,115,108,111,116,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,116,101,120,116,45,97,100,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,98,97,110,110,101,114,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,65,100,32,116,101,120,116,97,100,32,116,101,120,116,65,100,115,32,116,101,120,116,97,100,115,32,116,103,98,45,98,97,110,110,101,114,32,116,114,103,45,98,45,98,97,110,110,101,114,45,98,108,111,99,107).split(" "),t);r.setAttribute("class",o.join(" ")),r.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),r.setAttribute("id","trg-b-banners-1"),r.setAttribute("data-view","SlotView.mimic"),this.bait=D.body.appendChild(r),this.bait.offsetParent,this.bait.offsetHeight,this.bait.offsetLeft,this.bait.offsetTop,this.bait.offsetWidth,this.bait.clientHeight,this.bait.clientWidth,this.loopNumber=0,this.fnPositive=e||null,this.fnNegative=n||null;var i=this;setTimeout((function(){i._checkBait.call(i)}),1)}var t=7;return e.prototype._checkBait=function(){if(le)this._stop();else{var e=!1;if(null!==D.body.getAttribute("abp")||null===this.bait.offsetParent||0==this.bait.offsetHeight||0==this.bait.offsetLeft||0==this.bait.offsetTop||0==this.bait.offsetWidth||0==this.bait.clientHeight||0==this.bait.clientWidth?e=!0:void 0!==A.getComputedStyle&&(e="none"==(e=A.getComputedStyle(this.bait,null)).getPropertyValue("display")||"hidden"==e.getPropertyValue("visibility")),(!0===e||10<=++this.loopNumber)&&this._stop(),e&&this.fnPositive)try{(0,this.fnPositive)()}catch(e){F&&console.warn("[TopMailRu] Error#1.9",e)}else if(!e&&10>this.loopNumber){var t=this;setTimeout((function(){t._checkBait.call(t)}),50*this.loopNumber)}else try{(0,this.fnNegative)()}catch(e){F&&console.warn("[TopMailRu] Error#1.10",e)}}},e.prototype._stop=function(){try{D.body.removeChild(this.bait)}catch(e){F&&console.warn("[TopMailRu] Error#1.11",e)}},function(t,n){new e(t,n)}}(),de=null,fe="ecommerce",he=!1,ve=[],me=[36383,2540645,3171181,3074137,2057653],ge=[];!function(){function e(e,t){for(var n=0,r=t.length;n<r;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function t(t,n,r){for(var o={ecom_method:[],ecom_type:[],ecom_data:{events:[]}},i=0,a=t.length;i<a;i++){var l=f[t[i]];if(l){e(o.ecom_method,[t[i]]);for(var c=0,s=l.length;c<s;c++)for(var u=0,p=r.length;u<p;u++){var d=l[c][r[u]];if(d)for(var h=0,v=n.length;h<v;h++)if(-1!==l[c].type.indexOf(n[h])){e(o.ecom_type,[n[h]]),e(o.ecom_data.events,d);break}}}}return o}function n(e,t,n){if(!e||!n||!(t in f))return null;for(var r,o=0,i=f[t].length;o<i;o++)if(n in(r=f[t][o])&&-1!==r[n].indexOf(e))return{ecom_method:[t],ecom_type:r.type.slice(),ecom_data:{}};return null}function r(e){for(var r,s,u=[],f=0,h=e.length;f<h;f++)if(s=e[f]){r=null;try{if(s.ecommerce)r=o(s)||i(s);else if(null===s.ecommerce)r=null;else if(s.event){var v={event:s.event,ecommerce:{}};r=o(v)||i(v)}else if("event"===s[0]){var m=s[1],g=s[2],y=n(m,l,p);y&&(y.ecom_data[m]=g),r=y}else if(s.event===fe)e:{for(var _=t([a],[c],[d]),b=0,w=_.ecom_data.events.length;b<w;b++)if(!s.hasOwnProperty(_.ecom_data.events[b])){r=null;break e}delete _.ecom_data.events,_.ecom_data[fe]=s,r=_}}catch(e){F&&console.warn("[TopMailRu] Error#1.23",e),r=null}r&&(u.push(r),ve.push(r))}if(u.length){for(e=0,r=u.length;e<r;e++)E($e,u[e]);for(de||(de=[0,0]),de[0]+=u.length,r=e=0,f=u.length;r<f;r++)e+=Q(u[r].ecom_data).length;de[1]+=e}}function o(e){var t,r;for(r in e.ecommerce)if(e.ecommerce.hasOwnProperty(r)&&(t=n(r,a,s))){if(e.event&&(r=n(e.event,a,u)))for(var o=0,i=t.ecom_type.length;o<i;o++)-1===r.ecom_type.indexOf(t.ecom_type[o])&&(t.ecom_type.splice(o,1),i--,o--);return t.ecom_data=e.ecommerce,t}return null}function i(e){var t=e.event,r=n(t,a,u);return r&&(r.ecom_data[t]=e.ecommerce),r}var a="push",l="gtag",c="gse",s="inner",u="outer",p="external",d="required",f={};f[l]=[{type:["gee"],external:"add checkout checkout_option checkout_progress click detail promo_click remove select_content set_checkout_option view_refund".split(" ")},{type:["ga4"],external:"earn_virtual_currency join_group level_end level_start level_up post_score select_content spend_virtual_currency tutorial_begin tutorial_complete unlock_achievement ad_impression login search share sign_up add_payment_info add_shipping_info add_to_wishlist generate_lead select_item select_promotion view_cart view_item_list".split(" ")},{type:["gee","ga4"],external:"add_to_cart begin_checkout purchase refund remove_from_cart view_item view_promotion".split(" ")}],f[a]=[{type:[c],required:["transactionId","transactionTotal"]},{type:["ga4"],outer:t([l],["ga4"],[p]).ecom_data.events},{type:["gee"],inner:"click checkout checkout_option impressions promoClick promoView refund".split(" "),outer:"addToCart checkout checkoutOption productClick productDetail ProductImpressions promotionClick promotionView removeFromCart transactionPush".split(" ")},{type:["ym","gee"],inner:["add","detail","purchase","remove"]}],ae=function(){!function(e){if((e=A[e])&&"function"==typeof e.push){r(e);var t=e.push;e.push=function(){var e=t.apply(this,arguments);return r([].slice.call(arguments,0)),e}}}("dataLayer"),he=!0}}();var ye=(lt=[{id:"gtag",globalVars:["google_tag_manager"]},{id:"ga",globalVars:["GoogleAnalyticsObject"]},{id:"ym",globalVars:["Ya",{re:"yaCounter\\d+"}]}],function(){var e;try{e=Object.keys(A).join(",")}catch(t){e=null}for(var t=[],n=0,r=lt.length;n<r;n++){var o;e:{for(var i=e,a=0,l=(o=lt[n].globalVars).length;a<l;a++){var c=o[a];if("string"==typeof c&&!(c in A)||"string"==typeof c.re&&(i&&-1===i.search(RegExp("($|,)"+c.re+"(,|^)","m"))||1===l)){o=!1;break e}}o=!0}o&&t.push(lt[n].id)}return t}),_e=ye(),be=864e5,we="tmr_floc",Ee=null;!function(e){try{D.interestCohort&&"function"==typeof D.interestCohort&&D.interestCohort().then((function(e){Ee={id:e.id,version:e.version},e=[e.id,e.version];var t=a();e=e.concat(t).join("|"),y(we,e,{path:"/",expires:be})}),(function(){}))}catch(e){}}();var ke={support:!1};(ke=function(){function t(){o(l)}function n(){o(l,d)}function r(){return c?!D[c]:null}function o(e,t){var n=a(),o=void 0===t?r():t;if(null===f[e])f[e]={ts:n,state:o,total:0};else{var l=f[e];if(l.state!==o){var c=n-l.ts,s=l.state;l.ts=n,l.state=o,c<i||(s===u?(l.total+=c,h&&h(n,c)):s===p&&v&&v(n,c))}}}var i=5,l="auto",c=null,s=null,u=!0,p=!1,d=null;"hidden"in D?(c="hidden",s="visibilitychange"):"mozHidden"in D?(c="mozHidden",s="mozvisibilitychange"):"webkitHidden"in D?(c="webkitHidden",s="webkitvisibilitychange"):"msHidden"in D&&(c="msHidden",s="msvisibilitychange");var f={};f[l]=null;var h=f.user=null,v=null;return{support:!!c,auto:function(r,o){h=r||null,v=o||null,c&&(t(),e(D,s,t)),e(A,"beforeunload",n),e(A,"unload",n)},set:function(e){o("user",!!e)},getLog:function(){var e,t,n=a(),r={};for(t in f)e=f[t],r[t]=e?e.total:0,e&&e.state&&(r[t]+=n-e.ts);return r},getValue:r}}()).auto();var Te="60.3.0",Re=0,Se=0,Me=i(16),Ce=null,Ie=null,je=0,xe="tmr_reqNum",Pe=null===(Pe=b(xe))?0:parseInt(Pe,10);_(xe,Pe);var Oe=b("tmr_lvid"),Ue=b("tmr_lvidTS");null!==Oe&&-1!==Oe.search(/^[0-9a-fA-F]+$/)||(Oe=i(32)),_("tmr_lvid",Oe),null!==Ue&&-1!==Ue.search(/^\d+$/)||(Ue=""+a()),_("tmr_lvidTS",Ue);var Le,Ae,Ve=0,De=[],He=[],Ne=[],$e=[],qe="ontouchstart"in A||1<(V.maxTouchPoints||V.msMaxTouchPoints)?"1":"0",Ge=A.devicePixelRatio||0,We=A.top===A?0:1,ze=null,Fe=A.performance||A.mozPerformance||A.msPerformance||A.webkitPerformance||{},Je=Fe.timing||{},Xe=Fe.navigation||{},Be="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),Ke=Je?Je.navigationStart:void 0,Ye="downlink downlinkMax effectiveType rtt saveData type".split(" ");Le=function(e,t,n){if(t&&"object"==typeof t){var r,o="id"in t&&t.id||Ve,i=n.title||null,a=Ae(t,{params:n.required,fn:n.fn});if(a.missed.length)console.warn("[TopMailRu]"+(o?"["+o+"]":"")+" Error#1.14","Unspecified "+(1<a.missed.length&&a.missed.slice(0,-1).join(", ")+" and "||"")+a.missed.slice(-1)+" in "+e);else{var l=Ae(t,{params:n.optional,fn:n.fn});r=[].concat(a.values).concat(l.values),a=[].concat(a.missed).concat(l.missed),n.value&&(t="value"in t&&t.value,!0!==n.value&&(t=t||n.value),t?r.push("value: "+t):a.push("value")),n=r.length?"{ "+r.join(", ")+" }":"",r=a.length?"("+(1<a.length?a.slice(0,-1).join(", ")+" and "+a.slice(-1)+" are":a.slice(-1)+" is")+" empty)":"",o?console.info("[TopMailRu]["+o+"]: "+(i||e)+" "+n+" "+r):console.warn("[TopMailRu] Error#1.15","Undefined counter ID of "+e+" "+n)}}else console.warn("[TopMailRu][]["+e+"] Error#1.13")},Ae=function(e,t){var n,r,o,i=[],a=[];if(t.params)for(n in t.params)if(t.params.hasOwnProperty(n)&&!1!==t.params[n])if(r=n in e&&e[n],!0!==t.params[n]&&(r=r||t.params[n]),r)try{o=t.fn?t.fn:null,i.push(n+': "'+(o?o(n,r):r)+'"')}catch(e){console.warn("[TopMailRu] Error#1.16",e)}else a&&a.push(n);return{values:i,missed:a}},T.prototype.callbackOnReady=function(e){F&&Le("onReady",e,{title:"OnReady callback"}),e&&"object"==typeof e&&"function"==typeof e.callback&&e.callback.call(e.context||null)},T.prototype.pageView=function(e){if(R(e),e&&"object"==typeof e&&e.id&&(5>He.length&&!n(e.id,He)&&(He.push(e.id),!1!==e.beat&&Ne.push(e.id),De.push(e),le&&w(e)),5>$e.length&&!n(e.id,$e)&&(!0===e.ecom||!1!==e.ecom&&(n(e.id,me)||!n(e.id,ge))))){$e.push(e.id);var t=[e.id];if(he)for(var r=0,o=ve.length;r<o;r++)E(t,ve[r])}F&&Le("pageView",e,{title:"Page view",optional:{url:H.href}}),C(e)&&(l(I(e,"/counter",!1,!0)),Se=a())},T.prototype.reachGoal=function(e){if(R(e),F&&Le("reachGoal",e,{title:"Reach goal",value:!0,required:{goal:!0}}),C(e)&&"goal"in e&&e.goal){var t="value"in e&&e.value&&parseInt(e.value)||"";l(I(e,"/tracker",!1,!0)+";e="+escape("RG:"+t+"/"+e.goal))}},T.prototype.itemView=function(e){if(F&&Le("itemView",e,{title:"Item view",optional:{list:!0,pagetype:!0,productid:!0,totalvalue:!0},fn:function(e,t){return(""+t).replace(/;/g," ")}}),C(e)){var t=e.list||"",n=e.productid||"",r=e.pagetype||"",o=e.totalvalue||0;(new Image).src="https://ad.mail.ru/retarget/?counter="+(e.id||Ve)+"&list="+t+"&productid="+n+"&pagetype="+r+"&totalvalue="+o+"&_="+Math.random(),t="IV:"+o+"/"+(""+t).replace(/;/g," ")+";"+(""+n).replace(/;/g," ")+";"+(""+r).replace(/;/g," "),l(I(e,"/tracker",!1,!1)+";e="+escape(t))}},T.prototype.sendEvent=function(e){if(R(e),F&&Le("sendEvent",e,{title:"Send event",value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(e,t){return(""+t).substring(0,300).replace(/;/g," ")}}),C(e)&&"category"in e&&e.category&&"action"in e&&e.action){var t=(""+e.category).substring(0,300),n=(""+e.action).substring(0,300),r="label"in e&&e.label?(""+e.label).substring(0,300):"";t="CE:"+("value"in e&&e.value&&parseInt(e.value)||"")+"/"+(""+t).replace(/;/g," ")+";"+(""+n).replace(/;/g," ")+";"+(""+r).replace(/;/g," ");l(I(e,"/tracker",!1,!1)+";e="+escape(t))}},T.prototype.setUserID=function(e){if(null===e||!1===e||void 0===e)this.deleteUserID();else{var t=typeof e;"number"!==t&&"string"!==t?F&&console.warn("[TopMailRu] Error#1.17","Invalid user ID in setUserID"):(Ce=e,F&&console.info("[TopMailRu]: Global user ID = "+Ce))}},T.prototype.getUserID=function(){return Ce||0===Ce?Ce:void 0},T.prototype.deleteUserID=function(){Ce=null,F&&console.info("[TopMailRu]: Reset global user ID to null")},T.prototype.setUserParams=function(e){if(null===e||!1===e||void 0===e)this.deleteUserParams();else if(r(e)){try{Ie=o(!0,{},e)}catch(e){return void(F&&console.warn("[TopMailRu] Error#1.22","Invalid user params in setUserParams"))}F&&console.info("[TopMailRu]: Global user params = "+Q(Ie))}else F&&console.warn("[TopMailRu] Error#1.21","Invalid user params in setUserParams")},T.prototype.getUserParams=function(){var e=Ie||void 0;return e?o(!0,{},e):void 0},T.prototype.deleteUserParams=function(){Ie=null,F&&console.info("[TopMailRu]: Reset global user params to null")},T.prototype.getClientID=function(){return Oe||0===Oe?Oe:void 0},T.prototype._MT_event=function(e,t,n){R(e),F&&Le(t,e,{title:n}),C(e)&&l(I(e,"/tracker",!1,!0)+";e="+escape("MT:/"+t))},T.prototype.miniAppEvent=function(e){this._MT_event(e,"miniAppEvent","VK Mini App Event")},T.prototype.processEvent=function(e,t){if(e&&"object"==typeof e)if("type"in e){if("onready"===e.type){if(t&&0>t)return;this.callbackOnReady(e)}else if(t&&0<t)return;switch(e.type){case"pageView":this.pageView(e);break;case"reachGoal":this.reachGoal(e);break;case"itemView":this.itemView(e);break;case"sendEvent":this.sendEvent(e);break;case"setUserID":"userid"in e&&this.setUserID(e.userid);break;case"deleteUserID":this.deleteUserID();break;case"setUserParams":"params"in e&&this.setUserParams(e.params);break;case"deleteUserParams":this.deleteUserParams();break;case"miniAppEvent":this.miniAppEvent(e)}}else F&&console.warn("[TopMailRu] Error#1.19","Unspecified type of push event");else F&&console.warn("[TopMailRu] Error#1.18","Invalid push event")},T.prototype.push=function(e){for(var t=0,n=arguments.length;t<n;t++)this.processEvent(arguments[t])};var Ze=!1;T.prototype.onready=function(){Ze||(Ze=!0,!Z&&!le&&pe(x,P),ae())};var Qe=!1;T.prototype.onload=function(){if(!Qe){if(Qe=!0,je=a(),!K&&0<De.length){for(var e=";e="+escape("RT/load")+";et="+je,t=0;t<De.length;t++)l(I(De[t],"/tracker",!0,!1)+e);Se=je}X||setTimeout((function(){j(2)}),2e3),B||setTimeout((function(){j(15)}),15e3)}},T.prototype.beat=function(){if(!J&&Re){var e=a();if(!(12e4<e-Re)){if(12e4<e-Se)for(var t=";e="+escape("RT/resend")+";et="+je,n=0;n<De.length;n++)!1!==De[n].beat&&l(I(De[n],"/tracker",!1,!0)+t);else 0<Ne.length&&l("/tracker?"+m({js:"13",id:Ne[0],e:"RT/beat",sid:Me,ids:Ne.join(),ver:Te,_:Math.random()},";"));Se=e}}};var et=!1;T.prototype.unload=function(){if(!et&&(et=!0,!Y)){var e;if(e=(e=M())?a()-e:void 0,e=";e="+escape("RT/unload")+";et="+a()+(e?";pvt="+escape(e):""),ke.support){var t=ke.getLog();e+=";vtauto="+t.auto}for(t=0;t<De.length;t++)l(I(De[t],"/tracker",!1,!1)+e)}},T.prototype.activity=function(e){Re=a()};var tt=_tmr;_tmr=new T;for(var nt,rt=0,ot=tt.length;rt<ot;rt++)(nt=tt[rt])&&"object"==typeof nt&&R(nt);for(rt=0,ot=tt.length;rt<ot;rt++)nt=tt[rt],_tmr.processEvent(nt,1);for(rt=0,ot=tt.length;rt<ot;rt++)nt=tt[rt],_tmr.processEvent(nt,-1);if("complete"===D.readyState||"loading"!==D.readyState&&!D.documentElement.doScroll?_tmr.onready():D.addEventListener?e(D,"DOMContentLoaded",U):D.attachEvent&&e(D,"readystatechange",U),"complete"===D.readyState?_tmr.onload():e(A,"load",(function e(){t(A,"load",e),_tmr.onready(),_tmr.onload()})),Y||(e(A,"unload",L),e(A,"beforeunload",L)),!J){setInterval((function(){_tmr.beat()}),6e4);try{var it="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" "),at=function(t){e(D,t,(function(){_tmr.activity(t)}))};for(rt=0;rt<it.length;rt++)at(it[rt]);e(A,"scroll",(function(){_tmr.activity("scallback")}))}catch(e){F&&console.warn("[TopMailRu] Error#1.20",e)}}}var lt}();